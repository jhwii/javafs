<!DOCTYPE html>
<html lang="ko">
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">
<head>
    <meta charset="UTF-8">
    <title th:text="|${pageName}|"></title>
    <link th:href="@{/css/layout1.css}" rel="stylesheet">
</head>
<style>
    .comm_Save{
        width:500px;
        margin: 0 auto;
        padding: 200px 0;

    }

    .comm_Save input{
        width : 100%;
        height: 30px;
        box-sizing : border-box;
    }

    .comm_Save textarea {
        width: 100%;
        margin-top : 10px;
        height : 300px;
    }
    .comm_Save_Cont { 
        width: 100%;
        height: 400px;
    }
    .save_btn { 
    background: #222;
    color: #fff;
    width: 100px;
    height: 20px;
    border: #fff;
    border-radius: 5px;
    font-size: 1rem;
    font-weight: bold;
    }
    .save_file {
    color: #fff;
    background: #222;
    width: 50px;
    height: 20px;
    border: #fff;
    border-radius: 5px;
    font-size: 1rem;
    font-weight: bold; 
    }
    .upload-name {
      display: inline-block;
      height: 40px;
      padding: 0 10px;
      vertical-align: middle;
      border: 1px solid #dddddd;
      width: 60%;
      color: #999999;
      border-radius: 5px;
    }
    .comm_container label {
      display: inline-block;
      float: right;
      padding: 10px 20px;
      color: #fff;
      vertical-align: middle;
      background-color: rgba(0, 53, 109, 0.95);
      cursor: pointer;
      height: 20px;
      margin-left: 10px;
      border-radius: 5px;
    }
    .comm_container input[type="file"] {
      position: absolute;
      width: 0;
      height: 0;
      padding: 0;
      overflow: hidden;
      border: 0;
    }
</style>
<body>
<div th:replace="~{fragments/header::header}"></div>
<div layout:fragment="content">
    <div class="comm_Save">
        <form action="/security-login/community/save" method="post" enctype="multipart/form-data">
            작성자: <input type="text" name="communityWriter"> <br>
            비밀번호: <input type="text" name="communityPass"> <br>
            제목: <input type="text" name="communityTitle"> <br>
            내용: <textarea name="communityContents" class="comm_Save_Cont"></textarea> <br>
            <div class="comm_container">
                <input type="text" class="upload-name" 
                value="이미지를 업로드 하세요" placeholder="이미지를 업로드 하세요" disabled>
                <label for="upload-file">파일선택</label>
                <input class="save_file" type="file" name="communityFile">
            </div>
            <input class="save_btn" type="submit" value="글작성">
        </form>
    </div>

</div>
<div th:replace="~{fragments/footer::footer}"></div>

</body>
</html>
<script>
    window.addEventListener('load', function() {
  const upload_file = document.querySelector("#upload-file");
  const upload_name = document.querySelector(".upload-name");
  
  upload_file.addEventListener('input', ()=>{
      if(isImage(upload_file.files[0])){
        changeVal(upload_name, (upload_file.files[0].name));
      }
  });
  
  function isImage(file){
    return file.type.indexOf('image') >= 0;
  }
  function changeVal(class_name, change_name){
    class_name.value = chnage_name;
  }
});
</script>